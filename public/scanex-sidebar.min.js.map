{"version":3,"file":"scanex-sidebar.min.js","sources":["../node_modules/scanex-event-target/index.js","../src/Sidebar.js","../index.js"],"sourcesContent":["class EventTarget {\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n    addEventListener(type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            this.listeners[type] = [];\r\n        }\r\n        this.listeners[type].push(callback);\r\n    }\r\n    on(type, callback) {\r\n        this.addEventListener(type, callback);\r\n        return this;\r\n    }\r\n    removeEventListener (type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[type];\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            if(stack[i] === callback){\r\n                stack.splice(i, 1);\r\n                return this.removeEventListener(type, callback);\r\n            }\r\n        }\r\n    }\r\n    off(type, callback) {\r\n        this.removeEventListener(type, callback);\r\n        return this;\r\n    }\r\n    dispatchEvent(event) {\r\n        if(!(event.type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[event.type];\r\n\t    Object.defineProperty(event, 'target', {\r\n            enumerable: false,\r\n            configurable: false,\r\n            writable: false,\r\n            value: this\r\n        });\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            stack[i].call(this, event);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default EventTarget;","import EventTarget from 'scanex-event-target';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends EventTarget {\r\n    constructor (container, {position = 'left'} = {}) {\r\n        super();\r\n        this._container = container;\r\n        this._container.classList.add ('noselect');    \r\n        this._container.innerHTML = `<div class=\"scanex-sidebar\">\r\n            <div class=\"${position === 'left' ? 'tabs' : 'panes'}\"></div>\r\n            <div class=\"${position === 'left' ? 'panes' : 'tabs'}\"></div>\r\n        </div>`;\r\n\r\n        this._tabContainer = this._container.querySelector('.tabs');\r\n        this._paneContainer = this._container.querySelector('.panes');\r\n\r\n        this._current = null;\r\n        this._data = {};\r\n    }\r\n    enable (id) {\r\n        if (this._data[id]) {\r\n            this._data[id].enabled = true;\r\n        }\r\n    }\r\n    enabled (id) {\r\n        const {enabled} = id && this._data[id] ? this._data[id] : {enabled: false};\r\n        return enabled;\r\n    }\r\n    disable (id) {\r\n        if (this._data[id]) {            \r\n            if (id === this.current) {                \r\n                this.current = null;\r\n            }\r\n            this._data[id].enabled = false;\r\n        }     \r\n    }\r\n    get current () {\r\n        return this._current;\r\n    }\r\n    set current (current) {         \r\n        const tabs = this._tabContainer.children;\r\n        const panes = this._paneContainer.children;\r\n        let success = false;\r\n\r\n        for (let i = 0; i < tabs.length; ++i) {            \r\n            const id = tabs[i].getAttribute('data-tab-id');\r\n            const {opened, closed, enabled} = this._data[id];\r\n            let tab = tabs[i].querySelector('i');\r\n            let pane = panes[i];\r\n            if (id === current) {\r\n                tab.classList.remove (closed);\r\n                tab.classList.add (opened);\r\n                                \r\n                pane.classList.remove('hidden');\r\n                pane.classList.add('shown');\r\n\r\n                success = true;\r\n            }\r\n            else { \r\n                tab.classList.remove (opened);\r\n                tab.classList.add (closed);\r\n\r\n                pane.classList.remove('shown');\r\n                pane.classList.add('hidden');\r\n            }\r\n        } \r\n        this._current = success ? current : null;\r\n        let event = document.createEvent('Event');        \r\n        event.detail = {current: this._current};\r\n        event.initEvent('change', false, false);\r\n        this.dispatchEvent(event);        \r\n    } \r\n    addTab({id, icon, opened, closed, tooltip, enabled = true}) { \r\n        let tab = document.createElement('div');\r\n        let ic = document.createElement('i');        \r\n        icon.split (/\\s+/g).forEach (x => ic.classList.add(x));    \r\n        ic.classList.add (id === this._current ? opened : closed);\r\n        tab.appendChild (ic);\r\n        tab.setAttribute ('data-tab-id', id);\r\n        if (tooltip) {\r\n            tab.setAttribute ('title', tooltip);\r\n        }\r\n        tab.addEventListener ('click', this._toggle.bind(this, id));\r\n        this._tabContainer.appendChild (tab);\r\n        \r\n        let pane = document.createElement('div');\r\n        pane.setAttribute ('data-pane-id', id);\r\n        pane.classList.add (this.visible && this.current === id ? 'shown' : 'hidden');\r\n        this._paneContainer.appendChild (pane);\r\n\r\n        this._data[id] = {icon, opened, closed, enabled};\r\n\r\n        return pane;\r\n    }\r\n    removeTab (id) {\r\n        const tab = this._tabContainer.querySelector(`[data-tab-id=${id}]`);\r\n        tab.removeEventListener('click', this._toggle.bind(this, id));\r\n        this._tabContainer.removeChild(tab);\r\n\r\n        const pane = this._paneContainer.querySelector(`[data-pane-id=${id}]`);\r\n        this._paneContainer.removeChild(pane);\r\n\r\n        for (let i = 0; i < this._data.length; ++i) {\r\n            if (this._data[i].id === id) {\r\n                this._data.splice(i, 1);\r\n                break;\r\n            }         \r\n        }\r\n    }    \r\n    _toggle (current) {\r\n        if (this.enabled (current)) {\r\n            this.current = this.current === current ? null : current;\r\n        }     \r\n    }\r\n}\r\n\r\nexport default Sidebar;","import Sidebar from './src/Sidebar.js';\r\n\r\nlet map = L.map(document.body, {zoomControl: false}).setView([54.04, 26.27], 5);\r\nL.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);\r\n\r\nlet SidebarControl = L.Control.extend({\r\n    includes: L.Evented ? L.Evented.prototype : L.Mixin.Events,\r\n    \r\n    initialize: function(options) {\r\n        L.setOptions(this, options);        \r\n    },\r\n\r\n    onAdd: function(map) {\r\n\t\tthis._container = L.DomUtil.create('div');\r\n\t\tthis._sidebar = new Sidebar(this._container, {position: 'left'});\r\n\r\n\t\tconst tabs = [\r\n\t\t\t{id: 'layers', icon: 'fas fa-layer-group', opened: 'opened', closed: 'closed', content: 'Layers', tooltip: 'Layers'},\r\n\t\t\t{id: 'weather', icon: 'fas fa-bolt', opened: 'opened', closed: 'closed', content: 'Weather', tooltip: 'Weather'},\r\n\t\t\t{id: 'services', icon: 'fas fa-cogs', opened: 'opened', closed: 'closed', content: 'Services', tooltip: 'Services',  enabled: false},\r\n\t\t];\r\n\t\t\t\t\r\n\t\tfor (let i = 0; i < tabs.length; ++i) {\r\n            const {id, icon, opened, closed, content, tooltip, enabled} = tabs[i];\r\n            let p = this._sidebar.addTab({id, icon, opened, closed, tooltip, enabled});\r\n\t\t\tp.innerHTML = `<span>${content}</span>`;\r\n        }\r\n\r\n        this._sidebar.addEventListener('change', e => {\r\n            const {detail} = e;\r\n            console.log(detail);\r\n        });\r\n\r\n        return this._container;\r\n    },\r\n\r\n    addTo: function(map) {\r\n        L.Control.prototype.addTo.call(this, map);\r\n        if (this.options.addBefore) {\r\n            this.addBefore(this.options.addBefore);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addBefore: function(id) {\r\n        let parentNode = this._parent && this._parent._container;\r\n        if (!parentNode) {\r\n            parentNode = this._map && this._map._controlCorners[this.getPosition()];\r\n        }\r\n        if (!parentNode) {\r\n            this.options.addBefore = id;\r\n        }\r\n        else {\r\n            for (let i = 0, len = parentNode.childNodes.length; i < len; i++) {\r\n                let it = parentNode.childNodes[i];\r\n                if (id === it._id) {\r\n                    parentNode.insertBefore(this._container, it);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },    \r\n});\r\n\r\nexport default new SidebarControl({position: 'topleft'}).addTo(map);"],"names":["EventTarget","listeners","type","callback","this","push","addEventListener","stack","i","l","length","splice","removeEventListener","event","defineProperty","call","Sidebar","container","position","_container","classList","add","innerHTML","_tabContainer","querySelector","_paneContainer","_current","_data","id","enabled","current","tabs","children","panes","success","getAttribute","opened","closed","tab","pane","remove","document","createEvent","detail","initEvent","dispatchEvent","icon","tooltip","createElement","ic","split","forEach","x","appendChild","setAttribute","_toggle","bind","visible","removeChild","map","L","body","zoomControl","setView","tileLayer","addTo","Control","extend","Evented","prototype","Mixin","Events","options","setOptions","DomUtil","create","_sidebar","content","addTab","e","log","addBefore","parentNode","_parent","_map","_controlCorners","getPosition","len","childNodes","it","_id","insertBefore"],"mappings":"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"}