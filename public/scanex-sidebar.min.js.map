{"version":3,"file":"scanex-sidebar.min.js","sources":["../node_modules/scanex-event-target/index.js","../src/Sidebar.js","../index.js"],"sourcesContent":["class EventTarget {\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n    addEventListener(type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            this.listeners[type] = [];\r\n        }\r\n        this.listeners[type].push(callback);\r\n    }\r\n    on(type, callback) {\r\n        this.addEventListener(type, callback);\r\n        return this;\r\n    }\r\n    removeEventListener (type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[type];\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            if(stack[i] === callback){\r\n                stack.splice(i, 1);\r\n                return this.removeEventListener(type, callback);\r\n            }\r\n        }\r\n    }\r\n    off(type, callback) {\r\n        this.removeEventListener(type, callback);\r\n        return this;\r\n    }\r\n    dispatchEvent(event) {\r\n        if(!(event.type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[event.type];\r\n\t    Object.defineProperty(event, 'target', {\r\n            enumerable: false,\r\n            configurable: false,\r\n            writable: false,\r\n            value: this\r\n        });\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            stack[i].call(this, event);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default EventTarget;","import EventTarget from 'scanex-event-target';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends EventTarget {\r\n    constructor (container, {position = 'left'} = {}) {\r\n        super();\r\n        this._container = container;\r\n        this._container.classList.add ('noselect');    \r\n        this._container.innerHTML = `<div class=\"scanex-sidebar\">\r\n            <div class=\"${position === 'left' ? 'tabs' : 'panes'}\"></div>\r\n            <div class=\"${position === 'left' ? 'panes' : 'tabs'}\"></div>\r\n        </div>`;\r\n\r\n        this._tabContainer = this._container.querySelector('.tabs');\r\n        this._paneContainer = this._container.querySelector('.panes');\r\n\r\n        this._current = null;\r\n        this._data = {};\r\n    }\r\n    enable (id) {\r\n        if (this._data[id]) {\r\n            this._data[id].enabled = true;\r\n        }\r\n    }\r\n    enabled (id) {\r\n        const {enabled} = id && this._data[id] ? this._data[id] : {enabled: false};\r\n        return enabled;\r\n    }\r\n    disable (id) {\r\n        if (this._data[id]) {\r\n            this._data[id].enabled = false;\r\n        }     \r\n    }\r\n    get current () {\r\n        return this._current;\r\n    }\r\n    set current (current) { \r\n        const tabs = this._tabContainer.children;\r\n        const panes = this._paneContainer.children;\r\n        let success = false;\r\n        for (let i = 0; i < tabs.length; ++i) {            \r\n            const id = tabs[i].getAttribute('data-tab-id');\r\n            const {opened, closed, enabled} = this._data[id];\r\n            if (enabled) {                \r\n                let tab = tabs[i].querySelector('i');\r\n                let pane = panes[i];\r\n                if (id === current) {\r\n                    tab.classList.remove (closed);\r\n                    tab.classList.add (opened);\r\n                                    \r\n                    pane.classList.remove('hidden');\r\n                    pane.classList.add('shown');\r\n                    \r\n                    success = true;\r\n                }\r\n                else { \r\n                    tab.classList.remove (opened);\r\n                    tab.classList.add (closed);\r\n\r\n                    pane.classList.remove('shown');\r\n                    pane.classList.add('hidden');\r\n                }                \r\n            }        \r\n        } \r\n        this._current = success ? current : null;\r\n        let event = document.createEvent('Event');        \r\n        event.detail = {current: this._current};\r\n        event.initEvent('change', false, false);\r\n        this.dispatchEvent(event);\r\n    } \r\n    addTab({id, icon, opened, closed, enabled = true}) { \r\n        let tab = document.createElement('div');\r\n        let ic = document.createElement('i');        \r\n        icon.split (/\\s+/g).forEach (x => ic.classList.add(x));    \r\n        ic.classList.add (id === this._current ? opened : closed);\r\n        tab.appendChild (ic);\r\n        tab.setAttribute ('data-tab-id', id);\r\n        tab.addEventListener ('click', this._toggle.bind(this, id));\r\n        this._tabContainer.appendChild (tab);\r\n        this._data[id] = {icon, opened, closed, enabled};\r\n        let pane = document.createElement('div');\r\n        pane.setAttribute ('data-pane-id', id);\r\n        pane.classList.add (this.visible && this.current === id ? 'shown' : 'hidden');\r\n        this._paneContainer.appendChild (pane);\r\n        return pane;\r\n    }\r\n    removeTab (id) {\r\n        const tab = this._tabContainer.querySelector(`[data-tab-id=${id}]`);\r\n        tab.removeEventListener('click', this._toggle.bind(this, id));\r\n        this._tabContainer.removeChild(tab);\r\n\r\n        const pane = this._paneContainer.querySelector(`[data-pane-id=${id}]`);\r\n        this._paneContainer.removeChild(pane);\r\n\r\n        for (let i = 0; i < this._data.length; ++i) {\r\n            if (this._data[i].id === id) {\r\n                this._data.splice(i, 1);\r\n                break;\r\n            }         \r\n        }\r\n    }    \r\n    _toggle (current) {        \r\n        this.current = this.current === current ? null : current;\r\n    }\r\n}\r\n\r\nexport default Sidebar;","import Sidebar from './src/Sidebar.js';\r\n\r\nlet map = L.map(document.body, {zoomControl: false}).setView([54.04, 26.27], 5);\r\nL.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);\r\n\r\nlet SidebarControl = L.Control.extend({\r\n    includes: L.Evented ? L.Evented.prototype : L.Mixin.Events,\r\n    \r\n    initialize: function(options) {\r\n        L.setOptions(this, options);        \r\n    },\r\n\r\n    onAdd: function(map) {\r\n\t\tthis._container = L.DomUtil.create('div');\r\n\t\tthis._sidebar = new Sidebar(this._container, {position: 'left'});\r\n\r\n\t\tconst tabs = [\r\n\t\t\t{id: 'layers', icon: 'fas fa-layer-group', opened: 'opened', closed: 'closed', content: 'Layers'},\r\n\t\t\t{id: 'weather', icon: 'fas fa-bolt', opened: 'opened', closed: 'closed', content: 'Weather'},\r\n\t\t\t{id: 'services', icon: 'fas fa-cogs', opened: 'opened', closed: 'closed', content: 'Services', enabled: false},\r\n\t\t];\r\n\t\t\t\t\r\n\t\tfor (let i = 0; i < tabs.length; ++i) {\r\n            const {id, icon, opened, closed, content, enabled} = tabs[i];\r\n            let p = this._sidebar.addTab({id, icon, opened, closed, enabled});\r\n\t\t\tp.innerHTML = `<span>${content}</span>`;\r\n        }\r\n\r\n        this._sidebar.addEventListener('change', e => {\r\n            const {detail} = e;\r\n            console.log(detail);\r\n        });\r\n\r\n        return this._container;\r\n    },\r\n\r\n    addTo: function(map) {\r\n        L.Control.prototype.addTo.call(this, map);\r\n        if (this.options.addBefore) {\r\n            this.addBefore(this.options.addBefore);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addBefore: function(id) {\r\n        let parentNode = this._parent && this._parent._container;\r\n        if (!parentNode) {\r\n            parentNode = this._map && this._map._controlCorners[this.getPosition()];\r\n        }\r\n        if (!parentNode) {\r\n            this.options.addBefore = id;\r\n        }\r\n        else {\r\n            for (let i = 0, len = parentNode.childNodes.length; i < len; i++) {\r\n                let it = parentNode.childNodes[i];\r\n                if (id === it._id) {\r\n                    parentNode.insertBefore(this._container, it);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },    \r\n});\r\n\r\nexport default new SidebarControl({position: 'topleft'}).addTo(map);"],"names":["EventTarget","listeners","type","callback","push","addEventListener","stack","i","l","length","splice","removeEventListener","event","Object","defineProperty","enumerable","configurable","writable","value","call","Sidebar","constructor","container","position","_container","classList","add","innerHTML","_tabContainer","querySelector","_paneContainer","_current","_data","enable","id","enabled","disable","current","tabs","children","panes","success","getAttribute","opened","closed","tab","pane","remove","document","createEvent","detail","initEvent","dispatchEvent","addTab","icon","createElement","ic","split","forEach","x","appendChild","setAttribute","_toggle","bind","visible","removeTab","removeChild","map","L","body","zoomControl","setView","tileLayer","addTo","SidebarControl","Control","extend","includes","Evented","prototype","Mixin","Events","initialize","options","setOptions","onAdd","DomUtil","create","_sidebar","content","p","e","console","log","addBefore","parentNode","_parent","_map","_controlCorners","getPosition","len","childNodes","it","_id","insertBefore"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;EACF,2BAAc;EAAA;;EACV,aAAKC,SAAL,GAAiB,EAAjB;EACH;;;;2CACgBC,MAAMC,UAAU;EAC7B,gBAAG,EAAED,QAAQ,KAAKD,SAAf,CAAH,EAA8B;EAC1B,qBAAKA,SAAL,CAAeC,IAAf,IAAuB,EAAvB;EACH;EACD,iBAAKD,SAAL,CAAeC,IAAf,EAAqBE,IAArB,CAA0BD,QAA1B;EACH;;;6BACED,MAAMC,UAAU;EACf,iBAAKE,gBAAL,CAAsBH,IAAtB,EAA4BC,QAA5B;EACA,mBAAO,IAAP;EACH;;;8CACoBD,MAAMC,UAAU;EACjC,gBAAG,EAAED,QAAQ,KAAKD,SAAf,CAAH,EAA8B;EAC1B;EACH;EACD,gBAAIK,QAAQ,KAAKL,SAAL,CAAeC,IAAf,CAAZ;EACA,iBAAI,IAAIK,IAAI,CAAR,EAAWC,IAAIF,MAAMG,MAAzB,EAAiCF,IAAIC,CAArC,EAAwCD,GAAxC,EAA6C;EACzC,oBAAGD,MAAMC,CAAN,MAAaJ,QAAhB,EAAyB;EACrBG,0BAAMI,MAAN,CAAaH,CAAb,EAAgB,CAAhB;EACA,2BAAO,KAAKI,mBAAL,CAAyBT,IAAzB,EAA+BC,QAA/B,CAAP;EACH;EACJ;EACJ;;;8BACGD,MAAMC,UAAU;EAChB,iBAAKQ,mBAAL,CAAyBT,IAAzB,EAA+BC,QAA/B;EACA,mBAAO,IAAP;EACH;;;wCACaS,OAAO;EACjB,gBAAG,EAAEA,MAAMV,IAAN,IAAc,KAAKD,SAArB,CAAH,EAAoC;EAChC;EACH;EACD,gBAAIK,QAAQ,KAAKL,SAAL,CAAeW,MAAMV,IAArB,CAAZ;EACHW,mBAAOC,cAAP,CAAsBF,KAAtB,EAA6B,QAA7B,EAAuC;EAChCG,4BAAY,KADoB;EAEhCC,8BAAc,KAFkB;EAGhCC,0BAAU,KAHsB;EAIhCC,uBAAO;EAJyB,aAAvC;EAMG,iBAAI,IAAIX,IAAI,CAAR,EAAWC,IAAIF,MAAMG,MAAzB,EAAiCF,IAAIC,CAArC,EAAwCD,GAAxC,EAA6C;EACzCD,sBAAMC,CAAN,EAASY,IAAT,CAAc,IAAd,EAAoBP,KAApB;EACH;EACJ;;;;;ECzCL,MAAMQ,OAAN,SAAsBpB,WAAtB,CAAkC;EAC9BqB,gBAAaC,SAAb,EAAwB,EAACC,WAAW,MAAZ,KAAsB,EAA9C,EAAkD;EAC9C;EACA,aAAKC,UAAL,GAAkBF,SAAlB;EACA,aAAKE,UAAL,CAAgBC,SAAhB,CAA0BC,GAA1B,CAA+B,UAA/B;EACA,aAAKF,UAAL,CAAgBG,SAAhB,GAA6B;0BACXJ,aAAa,MAAb,GAAsB,MAAtB,GAA+B,OAAQ;0BACvCA,aAAa,MAAb,GAAsB,OAAtB,GAAgC,MAAO;eAFzD;;EAKA,aAAKK,aAAL,GAAqB,KAAKJ,UAAL,CAAgBK,aAAhB,CAA8B,OAA9B,CAArB;EACA,aAAKC,cAAL,GAAsB,KAAKN,UAAL,CAAgBK,aAAhB,CAA8B,QAA9B,CAAtB;;EAEA,aAAKE,QAAL,GAAgB,IAAhB;EACA,aAAKC,KAAL,GAAa,EAAb;EACH;EACDC,WAAQC,EAAR,EAAY;EACR,YAAI,KAAKF,KAAL,CAAWE,EAAX,CAAJ,EAAoB;EAChB,iBAAKF,KAAL,CAAWE,EAAX,EAAeC,OAAf,GAAyB,IAAzB;EACH;EACJ;EACDA,YAASD,EAAT,EAAa;EACT,cAAM,EAACC,OAAD,KAAYD,MAAM,KAAKF,KAAL,CAAWE,EAAX,CAAN,GAAuB,KAAKF,KAAL,CAAWE,EAAX,CAAvB,GAAwC,EAACC,SAAS,KAAV,EAA1D;EACA,eAAOA,OAAP;EACH;EACDC,YAASF,EAAT,EAAa;EACT,YAAI,KAAKF,KAAL,CAAWE,EAAX,CAAJ,EAAoB;EAChB,iBAAKF,KAAL,CAAWE,EAAX,EAAeC,OAAf,GAAyB,KAAzB;EACH;EACJ;EACD,QAAIE,OAAJ,GAAe;EACX,eAAO,KAAKN,QAAZ;EACH;EACD,QAAIM,OAAJ,CAAaA,OAAb,EAAsB;EAClB,cAAMC,OAAO,KAAKV,aAAL,CAAmBW,QAAhC;EACA,cAAMC,QAAQ,KAAKV,cAAL,CAAoBS,QAAlC;EACA,YAAIE,UAAU,KAAd;EACA,aAAK,IAAIlC,IAAI,CAAb,EAAgBA,IAAI+B,KAAK7B,MAAzB,EAAiC,EAAEF,CAAnC,EAAsC;EAClC,kBAAM2B,KAAKI,KAAK/B,CAAL,EAAQmC,YAAR,CAAqB,aAArB,CAAX;EACA,kBAAM,EAACC,MAAD,EAASC,MAAT,EAAiBT,OAAjB,KAA4B,KAAKH,KAAL,CAAWE,EAAX,CAAlC;EACA,gBAAIC,OAAJ,EAAa;EACT,oBAAIU,MAAMP,KAAK/B,CAAL,EAAQsB,aAAR,CAAsB,GAAtB,CAAV;EACA,oBAAIiB,OAAON,MAAMjC,CAAN,CAAX;EACA,oBAAI2B,OAAOG,OAAX,EAAoB;EAChBQ,wBAAIpB,SAAJ,CAAcsB,MAAd,CAAsBH,MAAtB;EACAC,wBAAIpB,SAAJ,CAAcC,GAAd,CAAmBiB,MAAnB;;EAEAG,yBAAKrB,SAAL,CAAesB,MAAf,CAAsB,QAAtB;EACAD,yBAAKrB,SAAL,CAAeC,GAAf,CAAmB,OAAnB;;EAEAe,8BAAU,IAAV;EACH,iBARD,MASK;EACDI,wBAAIpB,SAAJ,CAAcsB,MAAd,CAAsBJ,MAAtB;EACAE,wBAAIpB,SAAJ,CAAcC,GAAd,CAAmBkB,MAAnB;;EAEAE,yBAAKrB,SAAL,CAAesB,MAAf,CAAsB,OAAtB;EACAD,yBAAKrB,SAAL,CAAeC,GAAf,CAAmB,QAAnB;EACH;EACJ;EACJ;EACD,aAAKK,QAAL,GAAgBU,UAAUJ,OAAV,GAAoB,IAApC;EACA,YAAIzB,QAAQoC,SAASC,WAAT,CAAqB,OAArB,CAAZ;EACArC,cAAMsC,MAAN,GAAe,EAACb,SAAS,KAAKN,QAAf,EAAf;EACAnB,cAAMuC,SAAN,CAAgB,QAAhB,EAA0B,KAA1B,EAAiC,KAAjC;EACA,aAAKC,aAAL,CAAmBxC,KAAnB;EACH;EACDyC,WAAO,EAACnB,EAAD,EAAKoB,IAAL,EAAWX,MAAX,EAAmBC,MAAnB,EAA2BT,UAAU,IAArC,EAAP,EAAmD;EAC/C,YAAIU,MAAMG,SAASO,aAAT,CAAuB,KAAvB,CAAV;EACA,YAAIC,KAAKR,SAASO,aAAT,CAAuB,GAAvB,CAAT;EACAD,aAAKG,KAAL,CAAY,MAAZ,EAAoBC,OAApB,CAA6BC,KAAKH,GAAG/B,SAAH,CAAaC,GAAb,CAAiBiC,CAAjB,CAAlC;EACAH,WAAG/B,SAAH,CAAaC,GAAb,CAAkBQ,OAAO,KAAKH,QAAZ,GAAuBY,MAAvB,GAAgCC,MAAlD;EACAC,YAAIe,WAAJ,CAAiBJ,EAAjB;EACAX,YAAIgB,YAAJ,CAAkB,aAAlB,EAAiC3B,EAAjC;EACAW,YAAIxC,gBAAJ,CAAsB,OAAtB,EAA+B,KAAKyD,OAAL,CAAaC,IAAb,CAAkB,IAAlB,EAAwB7B,EAAxB,CAA/B;EACA,aAAKN,aAAL,CAAmBgC,WAAnB,CAAgCf,GAAhC;EACA,aAAKb,KAAL,CAAWE,EAAX,IAAiB,EAACoB,IAAD,EAAOX,MAAP,EAAeC,MAAf,EAAuBT,OAAvB,EAAjB;EACA,YAAIW,OAAOE,SAASO,aAAT,CAAuB,KAAvB,CAAX;EACAT,aAAKe,YAAL,CAAmB,cAAnB,EAAmC3B,EAAnC;EACAY,aAAKrB,SAAL,CAAeC,GAAf,CAAoB,KAAKsC,OAAL,IAAgB,KAAK3B,OAAL,KAAiBH,EAAjC,GAAsC,OAAtC,GAAgD,QAApE;EACA,aAAKJ,cAAL,CAAoB8B,WAApB,CAAiCd,IAAjC;EACA,eAAOA,IAAP;EACH;EACDmB,cAAW/B,EAAX,EAAe;EACX,cAAMW,MAAM,KAAKjB,aAAL,CAAmBC,aAAnB,CAAkC,gBAAeK,EAAG,GAApD,CAAZ;EACAW,YAAIlC,mBAAJ,CAAwB,OAAxB,EAAiC,KAAKmD,OAAL,CAAaC,IAAb,CAAkB,IAAlB,EAAwB7B,EAAxB,CAAjC;EACA,aAAKN,aAAL,CAAmBsC,WAAnB,CAA+BrB,GAA/B;;EAEA,cAAMC,OAAO,KAAKhB,cAAL,CAAoBD,aAApB,CAAmC,iBAAgBK,EAAG,GAAtD,CAAb;EACA,aAAKJ,cAAL,CAAoBoC,WAApB,CAAgCpB,IAAhC;;EAEA,aAAK,IAAIvC,IAAI,CAAb,EAAgBA,IAAI,KAAKyB,KAAL,CAAWvB,MAA/B,EAAuC,EAAEF,CAAzC,EAA4C;EACxC,gBAAI,KAAKyB,KAAL,CAAWzB,CAAX,EAAc2B,EAAd,KAAqBA,EAAzB,EAA6B;EACzB,qBAAKF,KAAL,CAAWtB,MAAX,CAAkBH,CAAlB,EAAqB,CAArB;EACA;EACH;EACJ;EACJ;EACDuD,YAASzB,OAAT,EAAkB;EACd,aAAKA,OAAL,GAAe,KAAKA,OAAL,KAAiBA,OAAjB,GAA2B,IAA3B,GAAkCA,OAAjD;EACH;EApG6B;;ECDlC,IAAI8B,MAAMC,EAAED,GAAF,CAAMnB,SAASqB,IAAf,EAAqB,EAACC,aAAa,KAAd,EAArB,EAA2CC,OAA3C,CAAmD,CAAC,KAAD,EAAQ,KAAR,CAAnD,EAAmE,CAAnE,CAAV;EACAH,EAAEI,SAAF,CAAY,yCAAZ,EAAuDC,KAAvD,CAA6DN,GAA7D;;EAEA,IAAIO,iBAAiBN,EAAEO,OAAF,CAAUC,MAAV,CAAiB;EAClCC,cAAUT,EAAEU,OAAF,GAAYV,EAAEU,OAAF,CAAUC,SAAtB,GAAkCX,EAAEY,KAAF,CAAQC,MADlB;;EAGlCC,gBAAY,UAASC,OAAT,EAAkB;EAC1Bf,UAAEgB,UAAF,CAAa,IAAb,EAAmBD,OAAnB;EACH,KALiC;;EAOlCE,WAAO,UAASlB,GAAT,EAAc;EACvB,aAAK3C,UAAL,GAAkB4C,EAAEkB,OAAF,CAAUC,MAAV,CAAiB,KAAjB,CAAlB;EACA,aAAKC,QAAL,GAAgB,IAAIpE,OAAJ,CAAY,KAAKI,UAAjB,EAA6B,EAACD,UAAU,MAAX,EAA7B,CAAhB;;EAEA,cAAMe,OAAO,CACZ,EAACJ,IAAI,QAAL,EAAeoB,MAAM,oBAArB,EAA2CX,QAAQ,QAAnD,EAA6DC,QAAQ,QAArE,EAA+E6C,SAAS,QAAxF,EADY,EAEZ,EAACvD,IAAI,SAAL,EAAgBoB,MAAM,aAAtB,EAAqCX,QAAQ,QAA7C,EAAuDC,QAAQ,QAA/D,EAAyE6C,SAAS,SAAlF,EAFY,EAGZ,EAACvD,IAAI,UAAL,EAAiBoB,MAAM,aAAvB,EAAsCX,QAAQ,QAA9C,EAAwDC,QAAQ,QAAhE,EAA0E6C,SAAS,UAAnF,EAA+FtD,SAAS,KAAxG,EAHY,CAAb;;EAMA,aAAK,IAAI5B,IAAI,CAAb,EAAgBA,IAAI+B,KAAK7B,MAAzB,EAAiC,EAAEF,CAAnC,EAAsC;EAC5B,kBAAM,EAAC2B,EAAD,EAAKoB,IAAL,EAAWX,MAAX,EAAmBC,MAAnB,EAA2B6C,OAA3B,EAAoCtD,OAApC,KAA+CG,KAAK/B,CAAL,CAArD;EACA,gBAAImF,IAAI,KAAKF,QAAL,CAAcnC,MAAd,CAAqB,EAACnB,EAAD,EAAKoB,IAAL,EAAWX,MAAX,EAAmBC,MAAnB,EAA2BT,OAA3B,EAArB,CAAR;EACTuD,cAAE/D,SAAF,GAAe,SAAQ8D,OAAQ,SAA/B;EACM;;EAED,aAAKD,QAAL,CAAcnF,gBAAd,CAA+B,QAA/B,EAAyCsF,KAAK;EAC1C,kBAAM,EAACzC,MAAD,KAAWyC,CAAjB;EACAC,oBAAQC,GAAR,CAAY3C,MAAZ;EACH,SAHD;;EAKA,eAAO,KAAK1B,UAAZ;EACH,KA7BiC;;EA+BlCiD,WAAO,UAASN,GAAT,EAAc;EACjBC,UAAEO,OAAF,CAAUI,SAAV,CAAoBN,KAApB,CAA0BtD,IAA1B,CAA+B,IAA/B,EAAqCgD,GAArC;EACA,YAAI,KAAKgB,OAAL,CAAaW,SAAjB,EAA4B;EACxB,iBAAKA,SAAL,CAAe,KAAKX,OAAL,CAAaW,SAA5B;EACH;EACD,eAAO,IAAP;EACH,KArCiC;;EAuClCA,eAAW,UAAS5D,EAAT,EAAa;EACpB,YAAI6D,aAAa,KAAKC,OAAL,IAAgB,KAAKA,OAAL,CAAaxE,UAA9C;EACA,YAAI,CAACuE,UAAL,EAAiB;EACbA,yBAAa,KAAKE,IAAL,IAAa,KAAKA,IAAL,CAAUC,eAAV,CAA0B,KAAKC,WAAL,EAA1B,CAA1B;EACH;EACD,YAAI,CAACJ,UAAL,EAAiB;EACb,iBAAKZ,OAAL,CAAaW,SAAb,GAAyB5D,EAAzB;EACH,SAFD,MAGK;EACD,iBAAK,IAAI3B,IAAI,CAAR,EAAW6F,MAAML,WAAWM,UAAX,CAAsB5F,MAA5C,EAAoDF,IAAI6F,GAAxD,EAA6D7F,GAA7D,EAAkE;EAC9D,oBAAI+F,KAAKP,WAAWM,UAAX,CAAsB9F,CAAtB,CAAT;EACA,oBAAI2B,OAAOoE,GAAGC,GAAd,EAAmB;EACfR,+BAAWS,YAAX,CAAwB,KAAKhF,UAA7B,EAAyC8E,EAAzC;EACA;EACH;EACJ;EACJ;EACD,eAAO,IAAP;EACH;EAzDiC,CAAjB,CAArB;;AA4DA,cAAe,IAAI5B,cAAJ,CAAmB,EAACnD,UAAU,SAAX,EAAnB,EAA0CkD,KAA1C,CAAgDN,GAAhD,CAAf;;;;;;;;"}