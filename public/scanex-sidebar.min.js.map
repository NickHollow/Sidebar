{"version":3,"file":"scanex-sidebar.min.js","sources":["../node_modules/scanex-event-target/index.js","../src/Sidebar.js","../index.js"],"sourcesContent":["class EventTarget {\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n    addEventListener(type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            this.listeners[type] = [];\r\n        }\r\n        this.listeners[type].push(callback);\r\n    }\r\n    on(type, callback) {\r\n        this.addEventListener(type, callback);\r\n        return this;\r\n    }\r\n    removeEventListener (type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[type];\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            if(stack[i] === callback){\r\n                stack.splice(i, 1);\r\n                return this.removeEventListener(type, callback);\r\n            }\r\n        }\r\n    }\r\n    off(type, callback) {\r\n        this.removeEventListener(type, callback);\r\n        return this;\r\n    }\r\n    dispatchEvent(event) {\r\n        if(!(event.type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[event.type];\r\n\t    Object.defineProperty(event, 'target', {\r\n            enumerable: false,\r\n            configurable: false,\r\n            writable: false,\r\n            value: this\r\n        });\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            stack[i].call(this, event);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default EventTarget;","import EventTarget from 'scanex-event-target';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends EventTarget {\r\n    constructor (container, {position = 'left'} = {}) {\r\n        super();\r\n        this._container = container;\r\n        this._container.innerHTML = `<div class=\"scanex-sidebar\">\r\n            <div class=\"${position === 'left' ? 'tabs' : 'panes'}\"></div>\r\n            <div class=\"${position === 'left' ? 'panes' : 'tabs'}\"></div>\r\n        </div>`;\r\n\r\n        this._tabContainer = this._container.querySelector('.tabs');\r\n        this._paneContainer = this._container.querySelector('.panes');\r\n\r\n        this._current = null;\r\n        this._data = {};\r\n    }\r\n    enable (id) {\r\n        if (this._data[id]) {\r\n            this._data[id].enabled = true;\r\n            let tab = this._tabContainer.querySelector(`[data-tab-id=${id}]`);\r\n            tab.classList.remove ('tab-disabled');\r\n        }\r\n    }\r\n    enabled (id) {\r\n        const {enabled} = id && this._data[id] ? this._data[id] : {enabled: false};\r\n        return enabled;\r\n    }\r\n    disable (id) {\r\n        if (this._data[id]) {            \r\n            if (id === this.current) {                \r\n                this.current = null;\r\n            }\r\n            this._data[id].enabled = false;\r\n            let tab = this._tabContainer.querySelector(`[data-tab-id=${id}]`);\r\n            tab.classList.add ('tab-disabled');\r\n        }     \r\n    }\r\n    get current () {\r\n        return this._current;\r\n    }\r\n    set current (current) {         \r\n        const tabs = this._tabContainer.children;\r\n        const panes = this._paneContainer.children;\r\n        let success = false;\r\n\r\n        for (let i = 0; i < tabs.length; ++i) {            \r\n            const id = tabs[i].getAttribute('data-tab-id');\r\n            const {opened, closed, enabled} = this._data[id];\r\n            let tab = tabs[i].querySelector('i');\r\n            let pane = panes[i];\r\n            if (id === current) {\r\n                tab.classList.remove (closed);\r\n                tab.classList.add (opened);\r\n                                \r\n                pane.classList.remove('hidden');\r\n                pane.classList.add('shown');\r\n\r\n                success = true;\r\n            }\r\n            else { \r\n                tab.classList.remove (opened);\r\n                tab.classList.add (closed);\r\n\r\n                pane.classList.remove('shown');\r\n                pane.classList.add('hidden');\r\n            }\r\n        } \r\n        this._current = success ? current : null;\r\n        let event = document.createEvent('Event');        \r\n        event.detail = {current: this._current};\r\n        event.initEvent('change', false, false);\r\n        this.dispatchEvent(event);        \r\n    } \r\n    addTab({id, icon, opened, closed, tooltip, enabled = true}) { \r\n        let tab = document.createElement('div');\r\n        let ic = document.createElement('i');        \r\n        icon.split (/\\s+/g).forEach (x => ic.classList.add(x));    \r\n        ic.classList.add (id === this._current ? opened : closed);\r\n        tab.appendChild (ic);\r\n        tab.setAttribute ('data-tab-id', id);\r\n        if (!enabled) {\r\n            tab.classList.add('tab-disabled');\r\n        }\r\n        if (tooltip) {\r\n            tab.setAttribute ('title', tooltip);\r\n        }\r\n        tab.addEventListener ('click', this._toggle.bind(this, id));\r\n        this._tabContainer.appendChild (tab);\r\n        \r\n        let pane = document.createElement('div');\r\n        pane.setAttribute ('data-pane-id', id);\r\n        pane.classList.add (this.visible && this.current === id ? 'shown' : 'hidden');\r\n        this._paneContainer.appendChild (pane);\r\n\r\n        this._data[id] = {icon, opened, closed, enabled};\r\n\r\n        return pane;\r\n    }\r\n    removeTab (id) {\r\n        const tab = this._tabContainer.querySelector(`[data-tab-id=${id}]`);\r\n        tab.removeEventListener('click', this._toggle.bind(this, id));\r\n        this._tabContainer.removeChild(tab);\r\n\r\n        const pane = this._paneContainer.querySelector(`[data-pane-id=${id}]`);\r\n        this._paneContainer.removeChild(pane);\r\n\r\n        for (let i = 0; i < this._data.length; ++i) {\r\n            if (this._data[i].id === id) {\r\n                this._data.splice(i, 1);\r\n                break;\r\n            }         \r\n        }\r\n    }    \r\n    _toggle (current) {\r\n        if (this.enabled (current)) {\r\n            this.current = this.current === current ? null : current;\r\n        }     \r\n    }\r\n    getPane (id) {\r\n        return this._paneContainer.querySelector(`[data-pane-id=${id}]`);\r\n    }\r\n}\r\n\r\nexport default Sidebar;","import Sidebar from './src/Sidebar.js';\r\n\r\nlet map = L.map(document.body, {zoomControl: false}).setView([54.04, 26.27], 5);\r\nL.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);\r\n\r\nlet SidebarControl = L.Control.extend({\r\n    includes: L.Evented ? L.Evented.prototype : L.Mixin.Events,\r\n    \r\n    initialize: function(options) {\r\n        L.setOptions(this, options);        \r\n    },\r\n\r\n    onAdd: function(map) {\r\n\t\tthis._container = L.DomUtil.create('div');\r\n\t\tthis._sidebar = new Sidebar(this._container, {position: 'left'});\r\n\r\n\t\tconst tabs = [\r\n\t\t\t{id: 'layers', icon: 'fas fa-layer-group', opened: 'opened', closed: 'closed', content: 'Layers', tooltip: 'Layers'},\r\n\t\t\t{id: 'weather', icon: 'fas fa-bolt', opened: 'opened', closed: 'closed', content: 'Weather', tooltip: 'Weather'},\r\n\t\t\t{id: 'services', icon: 'fas fa-cogs', opened: 'opened', closed: 'closed', content: 'Services', tooltip: 'Services',  enabled: false},\r\n\t\t];\r\n\t\t\t\t\r\n\t\tfor (let i = 0; i < tabs.length; ++i) {\r\n            const {id, icon, opened, closed, content, tooltip, enabled} = tabs[i];\r\n            let p = this._sidebar.addTab({id, icon, opened, closed, tooltip, enabled});\r\n\t\t\tp.innerHTML = `<span>${content}</span>`;\r\n        }\r\n\r\n        this._sidebar.addEventListener('change', e => {\r\n            const {detail} = e;\r\n            console.log(detail);\r\n        });\r\n\r\n        return this._container;\r\n    },\r\n\r\n    addTo: function(map) {\r\n        L.Control.prototype.addTo.call(this, map);\r\n        if (this.options.addBefore) {\r\n            this.addBefore(this.options.addBefore);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addBefore: function(id) {\r\n        let parentNode = this._parent && this._parent._container;\r\n        if (!parentNode) {\r\n            parentNode = this._map && this._map._controlCorners[this.getPosition()];\r\n        }\r\n        if (!parentNode) {\r\n            this.options.addBefore = id;\r\n        }\r\n        else {\r\n            for (let i = 0, len = parentNode.childNodes.length; i < len; i++) {\r\n                let it = parentNode.childNodes[i];\r\n                if (id === it._id) {\r\n                    parentNode.insertBefore(this._container, it);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },    \r\n});\r\n\r\nexport default new SidebarControl({position: 'topleft'}).addTo(map);"],"names":["EventTarget","listeners","type","callback","this","push","addEventListener","stack","i","l","length","splice","removeEventListener","event","defineProperty","call","Sidebar","container","position","_container","innerHTML","_tabContainer","_this","querySelector","_paneContainer","_current","_data","id","enabled","classList","remove","current","add","icon","opened","closed","tooltip","tab","document","createElement","ic","split","forEach","x","appendChild","setAttribute","_toggle","bind","pane","visible","removeChild","tabs","children","panes","success","getAttribute","createEvent","detail","initEvent","dispatchEvent","map","L","body","zoomControl","setView","tileLayer","addTo","Control","extend","Evented","prototype","Mixin","Events","options","setOptions","DomUtil","create","_sidebar","content","addTab","e","log","addBefore","parentNode","_parent","_map","_controlCorners","getPosition","len","childNodes","it","_id","insertBefore"],"mappings":"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"}