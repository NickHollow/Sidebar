{"version":3,"file":"scanex-sidebar.min.js","sources":["../node_modules/scanex-event-target/index.js","../src/Sidebar.js","../index.js"],"sourcesContent":["class EventTarget {\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n    addEventListener(type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            this.listeners[type] = [];\r\n        }\r\n        this.listeners[type].push(callback);\r\n    }\r\n    on(type, callback) {\r\n        this.addEventListener(type, callback);\r\n        return this;\r\n    }\r\n    removeEventListener (type, callback) {\r\n        if(!(type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[type];\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            if(stack[i] === callback){\r\n                stack.splice(i, 1);\r\n                return this.removeEventListener(type, callback);\r\n            }\r\n        }\r\n    }\r\n    off(type, callback) {\r\n        this.removeEventListener(type, callback);\r\n        return this;\r\n    }\r\n    dispatchEvent(event) {\r\n        if(!(event.type in this.listeners)) {\r\n            return;\r\n        }\r\n        let stack = this.listeners[event.type];\r\n\t    Object.defineProperty(event, 'target', {\r\n            enumerable: false,\r\n            configurable: false,\r\n            writable: false,\r\n            value: this\r\n        });\r\n        for(let i = 0, l = stack.length; i < l; i++) {\r\n            stack[i].call(this, event);\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default EventTarget;","import EventTarget from 'scanex-event-target';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends EventTarget {\r\n    constructor (container, {position = 'left'} = {}) {\r\n        super();\r\n        this._container = container;\r\n        this._container.classList.add ('noselect');    \r\n        this._container.innerHTML = `<div class=\"scanex-sidebar\">\r\n            <div class=\"${position === 'left' ? 'tabs' : 'panes'}\"></div>\r\n            <div class=\"${position === 'left' ? 'panes' : 'tabs'}\"></div>\r\n        </div>`;\r\n\r\n        this._tabContainer = this._container.querySelector('.tabs');\r\n        this._paneContainer = this._container.querySelector('.panes');\r\n\r\n        this._active = null;     \r\n        this._tabs = [];\r\n    }    \r\n    get active () {\r\n        return this._active;\r\n    }\r\n    set active (current) { \r\n        const tabs = this._tabContainer.children;\r\n        const panes = this._paneContainer.children;       \r\n        for (let i = 0; i < tabs.length; ++i) {\r\n            const {id, active, normal} = this._tabs[i];\r\n            let tab = tabs[i].querySelector('i');\r\n            let pane = panes[i];\r\n            if (id === current) {\r\n                tab.classList.remove (normal);\r\n                tab.classList.add (active);\r\n                                \r\n                pane.classList.remove('hidden');\r\n                pane.classList.add('shown');\r\n            }\r\n            else { \r\n                tab.classList.remove (active);\r\n                tab.classList.add (normal);\r\n\r\n                pane.classList.remove('shown');\r\n                pane.classList.add('hidden');\r\n            }\r\n        }\r\n        this._active = current;            \r\n        let event = document.createEvent('Event');\r\n        event.detail = {active: current};\r\n        event.initEvent('change', false, false);\r\n        this.dispatchEvent(event);\r\n    } \r\n    addTab({id, icon, active, normal}) {        \r\n        let tab = document.createElement('div');\r\n        let ic = document.createElement('i');        \r\n        icon.split (/\\s+/g).forEach (x => ic.classList.add(x));    \r\n        ic.classList.add (id === this._active ? active : normal);\r\n        tab.appendChild (ic);\r\n        tab.setAttribute ('data-tab-id', id);\r\n        tab.addEventListener ('click', this._toggle.bind(this, id));\r\n        this._tabContainer.appendChild (tab);\r\n        this._tabs.push({id, icon, active, normal});\r\n        let pane = document.createElement('div');\r\n        pane.setAttribute ('data-pane-id', id);\r\n        pane.classList.add (this.visible && this.active === id ? 'shown' : 'hidden');\r\n        this._paneContainer.appendChild (pane);\r\n        return pane;\r\n    }\r\n    removeTab (id) {\r\n        const tab = this._tabContainer.querySelector(`[data-tab-id=${id}]`);\r\n        tab.removeEventListener('click', this._toggle.bind(this, id));\r\n        this._tabContainer.removeChild(tab);\r\n\r\n        const pane = this._paneContainer.querySelector(`[data-pane-id=${id}]`);\r\n        this._paneContainer.removeChild(pane);\r\n\r\n        for (let i = 0; i < this._tabs.length; ++i) {\r\n            if (this._tabs[i].id === id) {\r\n                this._tabs.splice(i, 1);\r\n                break;\r\n            }         \r\n        }\r\n    }    \r\n    _toggle (current) {        \r\n        this.active = this.active === current ? null : current;\r\n    }\r\n}\r\n\r\nexport default Sidebar;","import Sidebar from './src/Sidebar.js';\r\n\r\nlet map = L.map(document.body, {zoomControl: false}).setView([54.04, 26.27], 5);\r\nL.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);\r\n\r\nlet SidebarControl = L.Control.extend({\r\n    includes: L.Evented ? L.Evented.prototype : L.Mixin.Events,\r\n    \r\n    initialize: function(options) {\r\n        L.setOptions(this, options);        \r\n    },\r\n\r\n    onAdd: function(map) {\r\n\t\tthis._container = L.DomUtil.create('div');\r\n\t\tthis._sidebar = new Sidebar(this._container, {position: 'left'});\r\n\r\n\t\tconst tabs = [\r\n\t\t\t{id: 'layers', icon: 'fas fa-layer-group', active: 'active', normal: 'normal', content: 'Layers'},\r\n\t\t\t{id: 'weather', icon: 'fas fa-bolt', active: 'active', normal: 'normal', content: 'Weather'},\r\n\t\t\t{id: 'services', icon: 'fas fa-cogs', active: 'active', normal: 'normal', content: 'Services'},\r\n\t\t];\r\n\t\t\t\t\r\n\t\tfor (let i = 0; i < tabs.length; ++i) {\r\n            const {id, icon, active, normal, content} = tabs[i];\r\n            let p = this._sidebar.addTab({id, icon, active, normal});\r\n\t\t\tp.innerHTML = `<span>${content}</span>`;\r\n        }\r\n\r\n        this._sidebar.addEventListener('change', e => {\r\n            const {detail} = e;\r\n            console.log(detail);\r\n        });\r\n\r\n        return this._container;\r\n    },\r\n\r\n    addTo: function(map) {\r\n        L.Control.prototype.addTo.call(this, map);\r\n        if (this.options.addBefore) {\r\n            this.addBefore(this.options.addBefore);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addBefore: function(id) {\r\n        let parentNode = this._parent && this._parent._container;\r\n        if (!parentNode) {\r\n            parentNode = this._map && this._map._controlCorners[this.getPosition()];\r\n        }\r\n        if (!parentNode) {\r\n            this.options.addBefore = id;\r\n        }\r\n        else {\r\n            for (let i = 0, len = parentNode.childNodes.length; i < len; i++) {\r\n                let it = parentNode.childNodes[i];\r\n                if (id === it._id) {\r\n                    parentNode.insertBefore(this._container, it);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },    \r\n});\r\n\r\nexport default new SidebarControl({position: 'topleft'}).addTo(map);"],"names":["EventTarget","listeners","type","callback","push","addEventListener","stack","i","l","length","splice","removeEventListener","event","Object","defineProperty","enumerable","configurable","writable","value","call","Sidebar","constructor","container","position","_container","classList","add","innerHTML","_tabContainer","querySelector","_paneContainer","_active","_tabs","active","current","tabs","children","panes","id","normal","tab","pane","remove","document","createEvent","detail","initEvent","dispatchEvent","addTab","icon","createElement","ic","split","forEach","x","appendChild","setAttribute","_toggle","bind","visible","removeTab","removeChild","map","L","body","zoomControl","setView","tileLayer","addTo","SidebarControl","Control","extend","includes","Evented","prototype","Mixin","Events","initialize","options","setOptions","onAdd","DomUtil","create","_sidebar","content","p","e","console","log","addBefore","parentNode","_parent","_map","_controlCorners","getPosition","len","childNodes","it","_id","insertBefore"],"mappings":"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"}